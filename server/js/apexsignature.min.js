var apexSignature={parseBoolean:function(b){var a;"true"==b.toLowerCase()&&(a=!0);"false"==b.toLowerCase()&&(a=!1);"true"!=b.toLowerCase()&&"false"!=b.toLowerCase()&&(a=void 0);return a},clob2Array:function(b,a,d){loopCount=Math.floor(b.length/a)+1;for(var c=0;c<loopCount;c++)d.push(b.slice(a*c,a*(c+1)));return d},dataURI2base64:function(b){return b.substr(b.indexOf(",")+1)},save2Db:function(b,a,d,c){d=apexSignature.dataURI2base64(d);var e=[],e=apexSignature.clob2Array(d,3E4,e);apex.server.plugin(b,
{f01:e},{dataType:"html",success:function(){$("#"+a).trigger("apexsignature-saved-db");c()},error:function(b,d){$("#"+a).trigger("apexsignature-error-db");console.log("save2Db: apex.server.plugin ERROR:",d);c()}})},apexSignatureFnc:function(b,a,d){var c=document.getElementById(a.canvasId);d=apexSignature.parseBoolean(d);var e=parseInt(a.lineMinWidth),m=parseInt(a.lineMaxWidth),n=a.clearButton,p=a.saveButton,q=a.emptyAlert,k=c.width,g=c.height,h=parseInt(document.documentElement.clientWidth),l=parseInt(document.documentElement.clientHeight);
d&&(console.log("apexSignatureFnc: vOptions.ajaxIdentifier:",a.ajaxIdentifier),console.log("apexSignatureFnc: vOptions.canvasId:",a.canvasId),console.log("apexSignatureFnc: vOptions.lineMinWidth:",a.lineMinWidth),console.log("apexSignatureFnc: vOptions.lineMaxWidth:",a.lineMaxWidth),console.log("apexSignatureFnc: vOptions.backgroundColor:",a.backgroundColor),console.log("apexSignatureFnc: vOptions.penColor:",a.penColor),console.log("apexSignatureFnc: vOptions.saveButton:",a.saveButton),console.log("apexSignatureFnc: vOptions.clearButton:",
a.clearButton),console.log("apexSignatureFnc: pRegionId:",b),console.log("apexSignatureFnc: vCanvasWidth:",k),console.log("apexSignatureFnc: vCanvasHeight:",g),console.log("apexSignatureFnc: vClientWidth:",h),console.log("apexSignatureFnc: vCientHeight:",g));k>h&&(c.width=h-60);g>l&&(c.height=l-60);var f=new SignaturePad(c,{minWidth:e,maxWidth:m,backgroundColor:a.backgroundColor,penColor:a.penColor});$(n).click(function(){f.clear();$("#"+b).trigger("apexsignature-cleared")});$(p).click(function(){if(!1===
f.isEmpty()){var c=f.toDataURL();apexSignature.save2Db(a.ajaxIdentifier,b,c,function(){f.clear()})}else alert(q)})}};
