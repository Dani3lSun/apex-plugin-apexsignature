var apexSignature={parseBoolean:function(b){var a;"true"==b.toLowerCase()&&(a=!0);"false"==b.toLowerCase()&&(a=!1);"true"!=b.toLowerCase()&&"false"!=b.toLowerCase()&&(a=void 0);return a},clob2Array:function(b,a,d){loopCount=Math.floor(b.length/a)+1;for(var c=0;c<loopCount;c++)d.push(b.slice(a*c,a*(c+1)));return d},dataURI2base64:function(b){return b.substr(b.indexOf(",")+1)},save2Db:function(b,a,d,c){d=apexSignature.dataURI2base64(d);var e=[],e=apexSignature.clob2Array(d,3E4,e);apex.server.plugin(b,
{f01:e},{dataType:"html",success:function(){$("#"+a).trigger("apexsignature-saved-db");c()},error:function(b,d){$("#"+a).trigger("apexsignature-error-db");console.log("save2Db: apex.server.plugin ERROR:",d);c()}})},apexSignatureFnc:function(b,a,d){var c=document.getElementById(a.canvasId);d=apexSignature.parseBoolean(d);var e=parseInt(a.lineMinWidth),n=parseInt(a.lineMaxWidth),p=a.clearButton,q=a.saveButton,r=a.emptyAlert,k=apexSignature.parseBoolean(a.showSpinner),l=c.width,g=c.height,h=parseInt(document.documentElement.clientWidth),
m=parseInt(document.documentElement.clientHeight);d&&(console.log("apexSignatureFnc: vOptions.ajaxIdentifier:",a.ajaxIdentifier),console.log("apexSignatureFnc: vOptions.canvasId:",a.canvasId),console.log("apexSignatureFnc: vOptions.lineMinWidth:",a.lineMinWidth),console.log("apexSignatureFnc: vOptions.lineMaxWidth:",a.lineMaxWidth),console.log("apexSignatureFnc: vOptions.backgroundColor:",a.backgroundColor),console.log("apexSignatureFnc: vOptions.penColor:",a.penColor),console.log("apexSignatureFnc: vOptions.saveButton:",
a.saveButton),console.log("apexSignatureFnc: vOptions.clearButton:",a.clearButton),console.log("apexSignatureFnc: vOptions.emptyAlert:",a.emptyAlert),console.log("apexSignatureFnc: vOptions.showSpinner:",a.showSpinner),console.log("apexSignatureFnc: pRegionId:",b),console.log("apexSignatureFnc: vCanvasWidth:",l),console.log("apexSignatureFnc: vCanvasHeight:",g),console.log("apexSignatureFnc: vClientWidth:",h),console.log("apexSignatureFnc: vCientHeight:",g));l>h&&(c.width=h-60);g>m&&(c.height=m-60);
var f=new SignaturePad(c,{minWidth:e,maxWidth:n,backgroundColor:a.backgroundColor,penColor:a.penColor});$(p).click(function(){f.clear();$("#"+b).trigger("apexsignature-cleared")});$(q).click(function(){if(!1===f.isEmpty()){if(k)var c=apex.util.showSpinner($("#"+b));var d=f.toDataURL();apexSignature.save2Db(a.ajaxIdentifier,b,d,function(){f.clear();k&&c.remove()})}else alert(r)})}};
